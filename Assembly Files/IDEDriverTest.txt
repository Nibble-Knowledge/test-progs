
INF 0x13
INCL driver.s


LOD N_[F]
STR CHIP_SELECT
LOD N_[4]
STR STATUS_BUS
LOD N_[0]
STR STATUS_BUS

MOV16 ADDRESS INTO IDE_DRIVER.DataPtr
MOV8 SEC INTO IDE_DRIVER.SecNum
MOV16 CYL INTO IDE_DRIVER.Cyl
MOV READ INTO IDE_DRIVER.ZeroToWrite

MOVADDR RETURN INTO IDE_DRIVER.Exit[1]
LOD 0
JMP IDE_DRIVER.Enter
RETURN:
MOV8 IDE_DRIVER.Status INTO STAT
LOD N_[0]
JMP 0xC350
HLT

ADDRESS: .data 4 0d50000 
SEC: .data 2 0x01
CYL: .data 4 0x0000
READ: .data 1 0x1
STAT: .data 2


